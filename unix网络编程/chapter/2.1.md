# 基本套接字编程

## 3.2

### 3.2.5
* 套接字地址结构有5种：IPv4、IPv6、Unix域、数据链路、存储
* 对应结构体名称：sockaddr_in{},sockaddr_in6{},sockaddr_un{},sockaddr_dl{},sockaddr_storage{}

## 3.3
* 当往一个套接字函数传递一个套接字地址结构时，该结构总是以引用的形式来传递（也就是指针）。
* 1.从进程到内核传递套接字地址结构的函数有3个：bind、connect和sendto。这些函数的一个参数是指向某个套接字地址结构的指针，另一个参数是该结构的整数大小，如：
>Bind(listenfd, (SA *) &servaddr, sizeof(servaddr));

* 指针和指针所指内容的大小都传给内核，内核就知道到底需要从进程复制多少数据
* 2.从内核到进程传递套接字地址结构的函数有4个：accept、recvfrom、getsockname和getpeername。
* 这4个函数的其中两个参数是指向某个套接字地址结构的指针和指向表示该结构大小的整数变量的地址，如：

```c/c++
struct sockaddr_un cli;
socklen_t len;
len = sizeof(cli);
getpeername(unixfd,(SA *)&cli,&len);
```

* 这里，套接字地址结构大小这个参数从一个正式改为指向某个整数变量的指针，原因在于：当函数被调用时，结构大小是一个值，它告诉内核该结构的大小，
这样内核在写该结构时，不至于越界；当函数返回时，结构大小会被改变，它告诉进程，内核在该结构中究竟存储了多少信息。这种类型的参数称为 `值-结果` 参数


